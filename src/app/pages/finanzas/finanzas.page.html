<ion-content [fullscreen]="true">
  <div class="container">
    <div class="pantalla">

      <div class="inicio">
        <a class="regresar" href="#">
          <div class="left-arrow">
            <img src="/assets/images/left-arrow.svg" alt="" routerLink="/tab-home/home" />
          </div>
          <h1 class="title">Estacionamiento</h1>
        </a>


      </div>

      <div class="swiper-container">
        <div class="swiper-wrapper">
          <div class="swiper-slide">
            <button (click)="changeContent('Ingresos')"
              [ngClass]="{'active': isButtonActive('Ingresos')}">Ingresos</button>
          </div>

          <div class="swiper-slide">
            <button (click)="changeContent('Historial de Alquiler')"
              [ngClass]="{'active': isButtonActive('Historial de Alquiler')}">Historial de Alquiler</button>
          </div>

          <div class="swiper-slide">
            <button (click)="changeContent('Pagos')" [ngClass]="{'active': isButtonActive('Pagos')}">Pagos</button>
          </div>

          <div class="swiper-slide">
            <button (click)="changeContent('Historial de Pago')"
              [ngClass]="{'active': isButtonActive('Historial de Pago')}">Historial de Pago</button>
          </div>

        </div>

      </div>

      <!--                 -----Ingresos-----              -->
      <div *ngIf="selectedContent === 'Ingresos'">

        <div class="anuncio" *ngFor="let card_pago of arr_payment">
          <div>
            <h2>Anuncio {{ card_pago.id }}</h2>
            <p>{{ card_pago.nombre }}</p>
          </div>
          <div class="anuncio-ingreso">
            <div>
              <h3>Ingreso del día</h3>
              <p>{{ fecha_format_hoy }}</p>
            </div>
            <div>
              <span>S/. {{ card_pago.total }}</span>
            </div>
          </div>
        </div>

        <hr>

        <div class="ingreso-final">
          <div>
            <h3>Ingreso Final</h3>
            <p>Recuerda que el balance final se actualizará en base a la recurrencia de actividad y será acumulado para
              la forma de pago elegida en la sección de <span>pagos</span>.</p>
            <span>S/. {{ total_final }}</span>

            <div class="deposito-pago">
              <div class="icon-info">
                <img src="/assets/images/icon-info.svg" alt="">
              </div>
              <p>
                Recuerda que para solicitar el retiro de tu balance debes estar por encima de S/50
              </p>
            </div>
          </div>
        </div>

        <div class="continue">
          <button class="btn-sig" (click)="reqPayment()">Solicitar Retiro</button>
        </div>

      </div>

      <!--                 -----Historial de Alquiler-----              -->
      <div *ngIf="selectedContent === 'Historial de Alquiler'">

        <div class="alquiler-title">
          <h3>Esta semana</h3>
        </div>

        <div *ngFor="let reserva of data_reserve">
          <div class="alquiler" *ngIf="reserva.rst_id == 4 || reserva.rst_id == 3">
            <div class="icon-alquiler circle">
              <img src="/assets/images/icon-car.svg" alt="" class="icon-car">
            </div>

            <div class="info-alquiler">
              <h3 class="date"> {{ reserva.res_fecini | date: 'dd \'de\' MMMM' : 'es' }} : {{ reserva.rst_descri }}</h3>
              <h4>{{ reserva.tip_descri }}</h4>
              <h4 class="time">{{ reserva.res_fecini | date: 'hh:mm a' : 'es' }} - {{ reserva.res_fecfin | date: 'hh:mm
                a' : 'es' }}</h4>
              <p class="description">Alquiler <span>{{ reserva.gar_nombre }}</span></p>
              <p class="description">Vehículo <span>{{ reserva.veh_modelo }} : {{ reserva.veh_placa }}</span></p>
            </div>

            <div class="alquiler-monto">
              <span class="amount">S/. {{ reserva.pag_monto_total }}</span>
            </div>

          </div>
        </div>

      </div>

      <!--                 -----Pagos-----              -->
      <div *ngIf="selectedContent === 'Pagos'">

        <div>
          <h1 class="pagos-title">Configura tu método de pago</h1>

          <p>Transferencia a:</p>

          <div class="form-regla">
            <label class="num-regla">Banco de Destino</label>
            <select class="input-pago" id="distrito" [(ngModel)]="banco" placeholder="Selecciona tu banco"
              name="distrito">
              <option value="" disabled selected>Selecciona tu distrito</option>
              <option *ngFor="let banco of banks" value="{{ banco.mep_id }}">{{ banco.mep_descri }}</option>
            </select>
          </div>

          <div class="form-regla">
            <label class="num-regla">Número de Cuenta</label>
            <input [(ngModel)]="cta" type="number" class="input-pago" placeholder="*** ******* * **">
          </div>

          <div class="form-regla">
            <label class="num-regla">Número de Cuenta Interbancaria (CCI)</label>
            <input [(ngModel)]="cci" type="number" class="input-pago" placeholder="*** *** ************ **">
          </div>

          <div class="continue">
            <button class="btn-sig" (click)="save_method()">Guardar datos de pago</button>
          </div>
        </div>

        <div class="informacion-pagos">
          <div class="icon-info">
            <img src="/assets/images/icon-info.svg" alt="">
          </div>
          <p>
            Tu balance actualizado será depositado en el plazo de 2 días hábiles luego de solicitar el retiro en la
            categoría de Ingresos.
            Consideraremos una retención del 5% por el concepto de tarifa de servicio en cada retiro.
            Es por eso que recomendamos retirar el balance total a fin de mes o cada 15 días para aprovechar al máximo
            tu cochera.
          </p>
        </div>
      </div>

      <!--                 -----Historial de Pago-----              -->
      <div *ngIf="selectedContent === 'Historial de Pago'">

        <div>

          <h1 class="historial-title">Revisa tu histórico de pagos efectuados</h1>

          <div *ngFor="let pago of data_deposit">

            <div class="historial">
              <div class="icon-historial">
                <img src="/assets/images/icon-card.svg" alt="" class="icon-car">
              </div>

              <div class="info-historial">
                <h3 class="date">{{ pago.pre_fecsol | date: 'dd \'de\' MMMM' : 'es' }}</h3>
                <p class="description">Solicitud de retiro de balance</p>
                <h4 class="time" *ngIf="pago.pre_estado == 1" style="color: red;">En espera</h4>
                <h4 class="time" *ngIf="pago.pre_estado == 2" style="color: green;">Transferencia realizada</h4>
              </div>

              <div class="historial-monto">
                <span class="amount">S/. {{ pago.pre_monto }}</span>
              </div>
            </div>
          </div>

        </div>
      </div>

    </div>
  </div>
</ion-content>