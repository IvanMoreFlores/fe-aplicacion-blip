"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7587],{7587:(I,C,a)=>{a.r(C),a.d(C,{DatosVerificacionPageModule:()=>D});var f=a(177),g=a(4341),l=a(8974),p=a(8986),d=a(467),n=a(4438),_=a(7731),m=a(7291),M=a(2599),O=a(3366);const b=o=>({"rev-cod":!0,expired:o}),v=(o,s)=>({"all-inputs-filled":o,"not-all-inputs-filled":s}),x=[{path:"",component:(()=>{var o;class s{constructor(t,e,r,i,u,h){this.router=t,this.route=e,this.jwtService=r,this.storageService=i,this.sms=u,this.api=h,this.buttonText="reenviar c\xf3digo",this.minutes=1,this.seconds=0,this.isExpired=!1,this.input1="",this.input2="",this.input3="",this.input4="",this.inputsFilled=!1,this.nombre="",this.apellido="",this.fecha_nac="",this.genero="",this.doc="",this.nro="",this.phone=""}setData(){this.route.queryParams.subscribe(t=>{this.nombre=t.nombre,this.apellido=t.apellido,this.fecha_nac=t.fecha_nac,this.genero=t.genero,this.doc=t.doc,this.nro=t.nro,this.phone=t.phone})}checkInputs(){this.inputsFilled=!!(this.input1&&this.input2&&this.input3&&this.input4)}ngOnInit(){this.startTimer(),this.setData()}ngOnDestroy(){this.interval&&clearInterval(this.interval)}reenviarCodigo(){var t=this;return(0,d.A)(function*(){let e=yield t.storageService.getItem("token");t.isExpired&&(t.route.queryParams.subscribe(r=>{let i="+51"+r.PHONE2,u=Math.floor(1e3+9e3*Math.random()),h="Blip informa: el codigo solicitado es "+u;t.saveDataSms(u),t.sms.sendSms(i,h,e).subscribe(P=>{console.log(P)},P=>{console.error("Error al enviar el mensaje:",P)})}),t.resetTimer())})()}saveDataSms(t){var e=this;return(0,d.A)(function*(){yield e.storageService.removeItem("code-sms"),yield e.storageService.setItem("code-sms",t)})()}verifyOTP(){var t=this;return(0,d.A)(function*(){parseInt(t.input1+""+t.input2+t.input3+t.input4)===(yield t.storageService.getItem("code-sms"))?t.router.navigate(["/datos-creacion-contra"],{queryParams:{nombre:t.nombre,apellido:t.apellido,fecha_nac:t.fecha_nac,genero:t.genero,doc:t.doc,nro:t.nro,phone:t.phone}}):alert("codigo incorrecto")})()}return(){var t=this;return(0,d.A)(function*(){t.router.navigate(["/datos-numero"],{queryParams:{nombre:t.nombre,apellido:t.apellido,fecha_nac:t.fecha_nac,genero:t.genero,doc:t.doc,nro:t.nro,phone:t.phone}})})()}startTimer(){this.interval=setInterval(()=>{this.seconds>0?this.seconds--:this.minutes>0?(this.minutes--,this.seconds=59):(clearInterval(this.interval),this.interval=null,this.buttonText="reenviar c\xf3digo",this.isExpired=!0)},1e3)}resetTimer(){this.minutes=1,this.seconds=0,this.buttonText="reenviar c\xf3digo",this.isExpired=!1,this.startTimer()}}return(o=s).\u0275fac=function(t){return new(t||o)(n.rXU(p.Ix),n.rXU(p.nX),n.rXU(_.b),n.rXU(m.n),n.rXU(M.$),n.rXU(O.G))},o.\u0275cmp=n.VBU({type:o,selectors:[["app-datos-verificacion"]],decls:26,vars:20,consts:[[3,"fullscreen"],[1,"wrapper"],[1,"login"],[1,"title"],[1,"description"],[1,"n"],[1,"code-inputs"],["type","number","maxlength","1","inputmode","numeric",3,"ngModelChange","ionChange","ngModel"],["id","open-toast5",3,"click","ngClass","disabled"],[1,"TIME"],["trigger","open-toast5","message","C\xf3digo enviado satisfactoriamente.","position","top",1,"custom-toast",3,"duration"],[1,"footer-btn"],[1,"bnt-dow"],[1,"bac",3,"click"],[1,"nex",3,"click","ngClass"]],template:function(t,e){1&t&&(n.j41(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"h1",3),n.EFF(4,"Verifiquemos tu n\xfamero de tel\xe9fono"),n.k0s(),n.j41(5,"p",4),n.EFF(6,"Ingresa el c\xf3digo de 4 d\xedgitos enviado al n\xfamero "),n.j41(7,"a",5),n.EFF(8,"+51 923 092 610."),n.k0s()(),n.j41(9,"div",6)(10,"ion-input",7),n.mxI("ngModelChange",function(i){return n.DH7(e.input1,i)||(e.input1=i),i}),n.bIt("ionChange",function(){return e.checkInputs()}),n.k0s(),n.j41(11,"ion-input",7),n.mxI("ngModelChange",function(i){return n.DH7(e.input2,i)||(e.input2=i),i}),n.bIt("ionChange",function(){return e.checkInputs()}),n.k0s(),n.j41(12,"ion-input",7),n.mxI("ngModelChange",function(i){return n.DH7(e.input3,i)||(e.input3=i),i}),n.bIt("ionChange",function(){return e.checkInputs()}),n.k0s(),n.j41(13,"ion-input",7),n.mxI("ngModelChange",function(i){return n.DH7(e.input4,i)||(e.input4=i),i}),n.bIt("ionChange",function(){return e.checkInputs()}),n.k0s()(),n.j41(14,"button",8),n.bIt("click",function(){return e.reenviarCodigo()}),n.EFF(15),n.j41(16,"div",9),n.EFF(17),n.nI1(18,"number"),n.k0s()(),n.nrm(19,"ion-toast",10),n.k0s(),n.j41(20,"footer",11)(21,"div",12)(22,"button",13),n.bIt("click",function(){return e.return()}),n.EFF(23,"Atr\xe1s"),n.k0s(),n.j41(24,"button",14),n.bIt("click",function(){return e.verifyOTP()}),n.EFF(25,"Siguiente"),n.k0s()()()()()),2&t&&(n.Y8G("fullscreen",!0),n.R7$(10),n.R50("ngModel",e.input1),n.R7$(),n.R50("ngModel",e.input2),n.R7$(),n.R50("ngModel",e.input3),n.R7$(),n.R50("ngModel",e.input4),n.R7$(),n.Y8G("ngClass",n.eq3(15,b,e.isExpired))("disabled",!e.isExpired),n.R7$(),n.SpI(" ",e.buttonText," "),n.R7$(2),n.Lme(" ",e.minutes,":",n.i5U(18,12,e.seconds,"2.0")," "),n.R7$(2),n.Y8G("duration",3e3),n.R7$(5),n.Y8G("ngClass",n.l_i(17,v,e.inputsFilled,!e.inputsFilled)))},dependencies:[f.YU,g.BC,g.tU,g.vS,l.W9,l.$w,l.op,l.su,f.QX],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;display:flex;flex-direction:column;height:100%}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:100%;padding:50px;background-color:#fff}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:50px 0 30px;font-family:PoppinsMedium;font-size:28px;width:90%}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Poppins;font-weight:0}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .n[_ngcontent-%COMP%]{font-weight:600;color:#212121;text-decoration:none}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .code-inputs[_ngcontent-%COMP%]{display:flex}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .code-inputs[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{width:50px;height:50px;margin:20px 5px 0;text-align:center;font-size:24px;border:1px solid rgba(138,149,158,.5);background-color:#f7f7f7;border-radius:10px}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .rev-cod[_ngcontent-%COMP%]{font-family:Poppins;display:flex;border:1px solid #C8C5CA;margin-top:50px;border-radius:30PX;background-color:#fff;padding:20px;font-weight:500}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .rev-cod[_ngcontent-%COMP%]   .TIME[_ngcontent-%COMP%]{margin-left:10PX;font-family:Poppins;font-weight:600}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .rev-cod.expired[_ngcontent-%COMP%]{background-color:#79ffaf;color:#212121;border:#79FFAF}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .ini-con[_ngcontent-%COMP%]{font-family:Poppins;display:flex;border:1px solid #212121;margin-top:20px;border-radius:30PX;color:#fff;background-color:#212121;padding:20px}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:29px;line-height:42px;font-family:Poppins,sans-serif}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .bnt-dow[_ngcontent-%COMP%]{padding-bottom:20px;width:100%;display:flex;justify-content:space-between}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .bnt-dow[_ngcontent-%COMP%]   .bac[_ngcontent-%COMP%]{border-radius:30px;border:1px solid black;background-color:#fff;padding-inline:10px;color:#212121;padding-top:15px;font-size:15px;padding-bottom:15px;width:40%;font-family:Poppins,sans-serif;font-weight:600}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .bnt-dow[_ngcontent-%COMP%]   .nex[_ngcontent-%COMP%]{border-radius:30px;border:1px solid #C8C5CA;background-color:#fff;padding-inline:10px;color:#c8c5ca;padding-top:15px;padding-bottom:15px;width:40%;font-size:15px;font-family:Poppins,sans-serif;font-weight:600}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .bnt-dow[_ngcontent-%COMP%]   .all-inputs-filled[_ngcontent-%COMP%]{background-color:#79ffaf;color:#212121;font-size:15px;border:#79FFAF}']}),s})()}];let y=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[p.iI.forChild(x),p.iI]}),s})(),D=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[f.MD,g.YN,l.bv,y]}),s})()}}]);